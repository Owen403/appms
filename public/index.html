<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Music App - ·ª®ng d·ª•ng nghe nh·∫°c</title>
		<link rel="stylesheet" href="style-new.css?v=3" />
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
	</head>
	<body>
		<div class="container">
			<header class="header">
				<h1><i class="fas fa-music"></i> Music App</h1>
				<p>·ª®ng d·ª•ng nghe nh·∫°c v·ªõi l·ªùi b√†i h√°t</p>
			</header>

			<!-- Tab Navigation -->
			<div class="tab-container">
				<button class="tab-btn active" data-tab="player"><i class="fas fa-play"></i> Ph√°t nh·∫°c</button>
				<button class="tab-btn" data-tab="upload"><i class="fas fa-upload"></i> Upload nh·∫°c</button>
				<button class="tab-btn" data-tab="playlist"><i class="fas fa-list"></i> Danh s√°ch nh·∫°c</button>
			</div>

			<!-- Player Tab -->
			<div class="tab-content active" id="player-tab">
				<div class="player-section">
					<div class="current-song-info">
						<h3 id="current-title">Ch·ªçn b√†i h√°t ƒë·ªÉ ph√°t</h3>
						<p id="current-artist">---</p>
					</div>

					<div class="audio-controls">
						<audio id="audio-player" controls>
							<source id="audio-source" src="" type="audio/mpeg" />
							Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
						</audio>
					</div>

					<div class="lyrics-container">
						<h4><i class="fas fa-quote-left"></i> L·ªùi b√†i h√°t</h4>

						<!-- Lyrics Mode Toggle -->
						<div class="lyrics-mode-toggle">
							<button class="mode-btn active" id="mode-normal">
								<i class="fas fa-align-left"></i> L·ªùi th∆∞·ªùng
							</button>
							<button class="mode-btn" id="mode-synced">
								<i class="fas fa-microphone-alt"></i> Karaoke
							</button>
						</div>

						<div class="lyrics-display" id="lyrics-display">
							<p class="no-lyrics">Ch·ªçn b√†i h√°t ƒë·ªÉ xem l·ªùi...</p>
						</div>
					</div>
				</div>
			</div>

			<!-- Upload Tab -->
			<div class="tab-content" id="upload-tab">
				<div class="upload-section">
					<h2><i class="fas fa-cloud-upload-alt"></i> Upload b√†i h√°t m·ªõi</h2>

					<!-- Tab ch·ªçn lo·∫°i upload -->
					<div class="upload-method-tabs">
						<button type="button" class="method-tab active" data-method="file">
							<i class="fas fa-file-upload"></i> Upload file
						</button>
						<button type="button" class="method-tab" data-method="url">
							<i class="fas fa-link"></i> T·ª´ URL
						</button>
					</div>

					<!-- Form upload file -->
					<form
						id="upload-form"
						enctype="multipart/form-data"
						class="upload-method active"
						data-method="file"
					>
						<div class="form-group">
							<label for="title">T√™n b√†i h√°t:</label>
							<input type="text" id="title" name="title" />
						</div>

						<div class="form-group">
							<label for="artist">Ngh·ªá sƒ©:</label>
							<input type="text" id="artist" name="artist" />
						</div>

						<div class="form-group">
							<label for="audio">File nh·∫°c:</label>
							<input type="file" id="audio" name="audio" accept="audio/*" required />
							<small>H·ªó tr·ª£: MP3, WAV, OGG, M4A</small>
						</div>

						<div class="form-group">
							<label class="checkbox-container">
								<input type="checkbox" id="autoExtract" name="autoExtract" checked />
								<span class="checkmark"></span>
								<strong>T·ª± ƒë·ªông tr√≠ch xu·∫•t th√¥ng tin v√† l·ªùi b√†i h√°t</strong>
								<small>T·ª± ƒë·ªông l·∫•y t√™n, ngh·ªá sƒ© v√† l·ªùi t·ª´ file MP3 ho·∫∑c t·ª´ internet</small>
							</label>
						</div>

						<div class="form-group">
							<button type="button" class="btn-analyze" id="analyzeBtn">
								<i class="fas fa-search"></i> Ph√¢n t√≠ch file tr∆∞·ªõc
							</button>
							<small>Xem th√¥ng tin trong file MP3 tr∆∞·ªõc khi upload</small>
						</div>

						<div class="form-group">
							<label for="lyrics">L·ªùi b√†i h√°t:</label>
							<textarea
								id="lyrics"
								name="lyrics"
								rows="8"
								placeholder="Nh·∫≠p l·ªùi b√†i h√°t (t√πy ch·ªçn) ho·∫∑c ƒë·ªÉ tr·ªëng ƒë·ªÉ t·ª± ƒë·ªông t√¨m..."
							></textarea>
							<div class="lyrics-actions">
								<button type="button" class="btn-find-lyrics" id="findLyricsBtn">
									<i class="fas fa-search"></i> T√¨m l·ªùi online
								</button>
								<span class="lyrics-status" id="lyricsStatus"></span>
							</div>
						</div>

						<button type="submit" class="btn-upload">
							<i class="fas fa-upload"></i> Upload b√†i h√°t
						</button>
					</form>

					<!-- Form upload t·ª´ URL -->
					<form id="upload-url-form" class="upload-method" data-method="url">
						<div class="form-group">
							<label for="url">URL nh·∫°c:</label>
							<input
								type="url"
								id="url-input"
								name="url"
								required
								placeholder="https://example.com/song.mp3"
							/>
							<small>Nh·∫≠p URL tr·ª±c ti·∫øp t·ªõi file nh·∫°c (MP3, WAV, OGG, M4A)</small>

							<!-- Download progress -->
							<div class="download-progress" id="downloadProgress">
								<div class="download-info">
									<strong>ƒêang download...</strong>
									<div class="progress-bar">
										<div class="progress-fill" id="progressFill"></div>
									</div>
									<div id="downloadInfo">Chu·∫©n b·ªã download...</div>
								</div>
							</div>
						</div>

						<div class="form-group">
							<label for="title-url">T√™n b√†i h√°t:</label>
							<input type="text" id="title-url" name="title" />
						</div>

						<div class="form-group">
							<label for="artist-url">Ngh·ªá sƒ©:</label>
							<input type="text" id="artist-url" name="artist" />
						</div>

						<div class="form-group">
							<label class="checkbox-container">
								<input type="checkbox" id="autoExtractUrl" name="autoExtract" checked />
								<span class="checkmark"></span>
								<strong>T·ª± ƒë·ªông tr√≠ch xu·∫•t th√¥ng tin</strong>
								<small>T·ª± ƒë·ªông l·∫•y t√™n, ngh·ªá sƒ© v√† l·ªùi t·ª´ file sau khi download</small>
							</label>
						</div>

						<div class="form-group">
							<label for="lyrics-url">L·ªùi b√†i h√°t:</label>
							<textarea
								id="lyrics-url"
								name="lyrics"
								rows="8"
								placeholder="Nh·∫≠p l·ªùi b√†i h√°t (t√πy ch·ªçn) ho·∫∑c ƒë·ªÉ tr·ªëng ƒë·ªÉ t·ª± ƒë·ªông t√¨m..."
							></textarea>
							<div class="lyrics-actions">
								<button type="button" class="btn-find-lyrics" id="findLyricsUrlBtn">
									<i class="fas fa-search"></i> T√¨m l·ªùi online
								</button>
								<span class="lyrics-status" id="lyricsUrlStatus"></span>
							</div>
						</div>

						<button type="submit" class="btn-upload">
							<i class="fas fa-download"></i> Download v√† upload
						</button>
					</form>
				</div>
			</div>

			<!-- Playlist Tab -->
			<div class="tab-content" id="playlist-tab">
				<div class="playlist-section">
					<h2><i class="fas fa-list"></i> Danh s√°ch b√†i h√°t</h2>
					<div class="songs-list" id="songs-list">
						<p class="loading">ƒêang t·∫£i danh s√°ch...</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Loading overlay -->
		<div class="loading-overlay" id="loading-overlay">
			<div class="loading-spinner">
				<i class="fas fa-spinner fa-spin"></i>
				<p>ƒêang x·ª≠ l√Ω...</p>
			</div>
		</div>

		<!-- Toast notifications -->
		<div class="toast" id="toast"></div>

		<!-- Synced Lyrics Editor Modal -->
		<div id="synced-lyrics-modal" class="modal">
			<div class="modal-content">
				<div class="modal-header">
					<h3><i class="fas fa-microphone-alt"></i> Ch·ªânh s·ª≠a Synced Lyrics (Karaoke)</h3>
					<button class="close-modal" onclick="closeSyncedLyricsEditor()">
						<i class="fas fa-times"></i>
					</button>
				</div>
				<div class="modal-body">
					<div class="synced-editor-info">
						<h4 id="synced-song-title">T√™n b√†i h√°t</h4>
						<p id="synced-song-artist">Ngh·ªá sƒ©</p>
					</div>

					<div class="synced-editor-help">
						<p><strong>Format:</strong> <code>[mm:ss.xx] L·ªùi b√†i h√°t</code></p>
						<p><strong>V√≠ d·ª•:</strong></p>
						<pre>
[00:11.48] Trong nh√¢n gian c√≥ hai ƒëi·ªÅu kh√¥ng th·ªÉ gi·∫•u
[00:14.38] M·ªôt l√† khi say, hai khi ƒë√£ y√™u ai r·ªìi
[00:17.38] Nh·ªØng l√∫c ng·ªìi ƒë·ª£i ch·ªù n√†y ·ªü ƒë√¢u m√† ra?</pre
						>
						<p>
							<strong>üí° M·∫πo:</strong> D√πng n√∫t "T√≠ch Timestamp" b√™n d∆∞·ªõi ƒë·ªÉ t·ª± ƒë·ªông ch√®n timestamp
							theo th·ªùi gian ƒëang ph√°t!
						</p>
						<p>
							<strong>‚å®Ô∏è Ph√≠m t·∫Øt:</strong> <code>Ctrl+T</code>: T√≠ch timestamp |
							<code>Ctrl+‚Üê/‚Üí</code>: L√πi/Ti·∫øn 3s | <code>Ctrl+Space</code>: Ph√°t/D·ª´ng
						</p>
					</div>

					<!-- Mini Audio Player for Timestamp -->
					<div class="mini-player">
						<audio id="edit-audio-player" controls></audio>
						<div class="timestamp-controls">
							<div class="time-display">
								<i class="fas fa-clock"></i> <span id="current-timestamp">00:00.00</span>
							</div>
							<div class="timestamp-actions">
								<button
									class="btn btn-timestamp"
									onclick="insertTimestamp()"
									title="T√≠ch timestamp t·∫°i v·ªã tr√≠ hi·ªán t·∫°i (Ctrl+T)"
								>
									<i class="fas fa-plus-circle"></i> T√≠ch Timestamp
								</button>
								<button
									class="btn btn-timestamp btn-small"
									onclick="jumpBackward()"
									title="L√πi 3 gi√¢y (Ctrl+‚Üê)"
								>
									<i class="fas fa-backward"></i> -3s
								</button>
								<button
									class="btn btn-timestamp btn-small"
									onclick="jumpForward()"
									title="Ti·∫øn 3 gi√¢y (Ctrl+‚Üí)"
								>
									<i class="fas fa-forward"></i> +3s
								</button>
							</div>
						</div>
					</div>

					<div class="form-group">
						<label for="synced-lyrics-input">
							<i class="fas fa-edit"></i> Synced Lyrics (LRC Format):
						</label>
						<textarea
							id="synced-lyrics-input"
							rows="15"
							placeholder="Nh·∫≠p synced lyrics theo format LRC..."
							spellcheck="false"
						></textarea>
					</div>

					<div class="synced-editor-actions">
						<button class="btn btn-primary" onclick="saveSyncedLyrics()">
							<i class="fas fa-save"></i> L∆∞u Synced Lyrics
						</button>
						<button class="btn btn-secondary" onclick="previewSyncedLyrics()">
							<i class="fas fa-eye"></i> Xem tr∆∞·ªõc
						</button>
						<button class="btn btn-secondary" onclick="clearSyncedLyrics()">
							<i class="fas fa-eraser"></i> X√≥a
						</button>
						<button class="btn btn-secondary" onclick="closeSyncedLyricsEditor()">
							<i class="fas fa-times"></i> H·ªßy
						</button>
					</div>

					<div id="synced-preview" class="synced-preview" style="display: none">
						<h4><i class="fas fa-eye"></i> Xem tr∆∞·ªõc:</h4>
						<div id="synced-preview-content"></div>
					</div>
				</div>
			</div>
		</div>

		<script src="synced-lyrics.js"></script>
		<script src="script.js?v=5"></script>
	</body>
</html>
